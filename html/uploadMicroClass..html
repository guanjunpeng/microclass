<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
    <meta name=”format-detection” content=”telephone=no”/>
    <meta name="format-detection" content="email=no">
    <title>上传课件</title>
    <link rel="stylesheet" href="../libs/weiui/css/weui.css"/>
    <link rel="stylesheet" href="../assets/css/nbugs.css"/>
    <link rel="stylesheet" href="../assets/css/uploadMicroClass.css"/>
</head>
<body>
    <section class="mc-head">
        <input class="mc-title" type="text" placeholder="请输入课件标题"/>
        <input class="mc-tag" type="text" placeholder="课件标签"/>
        <p class="tag-box">
            <span class="tag-list">小学语文<i class="remove"></i></span>
            <span class="tag-list">散文<i class="remove"></i></span>
        </p>
    </section>

    <section class="courseware-box">
        <textarea class="courseware-text" ></textarea>
        <p class="courseware-img"><img src="" alt="课件图片"/></p>
    </section>

    <section class="toolbar-box">
        <span class="toolbar-text">文字</span><span class="toolbar-img">图片</span><span class="toolbar-video">视频</span><span class="toolbar-voice">声音</span>
    </section>

    <section class="toolbar-form">
        <a href="javascript:;" class="weui_btn weui_btn_primary toolbar-save">保存</a><a href="javascript:;" class="weui_btn weui_btn_blue toolbar-release">发布</a>
    </section>

    <script src="../libs/zepto/zepto.min.js"></script>
    <script>
        var agt = navigator.userAgent.toLowerCase();
        var is_op = (agt.indexOf("opera") != -1);
        var is_ie = (agt.indexOf("msie") != -1) && document.all && !is_op;
        $(document).on('focus, click, keyup', '.courseware-text', function(){
            ResizeTextarea(this,3);
        });
        function ResizeTextarea(a,row){
            if(!a){return}
            if(!row)
                row=5;
            var b=a.value.split("\n");
            var c=is_ie?1:0;
            c+=b.length;
            var d=a.cols;
            if(d<=20){d=40}
            for(var e=0;e<b.length;e++){
                if(b[e].length>=d){
                    c+=Math.ceil(b[e].length/d)
                }
            }
            c=Math.max(c,row);
            if(c!=a.rows){
                a.rows=c;
            }
        }
    </script>
</body>
</html>